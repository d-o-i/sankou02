#include "Main.h"
#include "FieldItemManager.h"

//=====================================================================================================
// コンストラクタ
//=====================================================================================================
FieldItemManager::FieldItemManager()
{
}

//=====================================================================================================
// デストラクタ
//=====================================================================================================
FieldItemManager::~FieldItemManager()
{
	for (auto &i : this->Item)
	{
		SAFE_DELETE(i);
	}
	this->Item.clear();
	ReleaseVector(Item);
}

//=====================================================================================================
// 使用しているアイテムの更新
//=====================================================================================================
void FieldItemManager::Update()
{
	Check();

	for (auto &i : this->Item)
	{
		i->Update();
	}
}

//=====================================================================================================
// 使用しているアイテムの描画
//=====================================================================================================
void FieldItemManager::Draw()
{
	for (auto &i : this->Item)
	{
		i->Draw();
	}
}

//=====================================================================================================
// 使用していないアイテムをチェックしてvectorから削除
//=====================================================================================================
void FieldItemManager::Check()
{
	for (auto i = this->Item.begin(); i != this->Item.end();)
	{
		if ((*i)->GetUse() == false)
		{
			SAFE_DELETE((*i));
			i = this->Item.erase(i);
		}
		else
		{
			i++;
		}
	}
}

//=====================================================================================================
// フィールド上にアイテムを生成
//=====================================================================================================
void FieldItemManager::Set(int ItemID, D3DXVECTOR3 _pos, D3DXVECTOR3 _move)
{
	FieldItem *object = new FieldItem(ItemID, _pos, _move);
	object->SetUse(true);
	this->Item.push_back(object);
}